## USB

![image-20200903140752136](USB.assets/image-20200903140752136.png)



#### USB体系架构

![image-20200903140842062](USB.assets/image-20200903140842062.png)

![image-20200903140900744](USB.assets/image-20200903140900744.png)

![image-20200903140920260](USB.assets/image-20200903140920260.png)

![image-20200903140937969](USB.assets/image-20200903140937969.png)

**总线速度**

![image-20200903141010840](USB.assets/image-20200903141010840.png)

**主机控制器**

![image-20200903141037144](USB.assets/image-20200903141037144.png)

![image-20200903141058151](USB.assets/image-20200903141058151.png)

**传输模式**

![image-20200903141129284](USB.assets/image-20200903141129284.png)

**寻址**

![image-20200903141148272](USB.assets/image-20200903141148272.png)

![image-20200903141208628](USB.assets/image-20200903141208628.png)



#### linux-USB子系统

![image-20200903141303245](USB.assets/image-20200903141303245.png)

![image-20200903141322473](USB.assets/image-20200903141322473.png)



#### 驱动程序的数据结构

**usb_device结构体**

![image-20200903141413911](USB.assets/image-20200903141413911.png)

**URB**

![image-20200903141448330](USB.assets/image-20200903141448330.png)

![image-20200903141506363](USB.assets/image-20200903141506363.png)

![image-20200903141525790](USB.assets/image-20200903141525790.png)

**管道**

![image-20200903141549413](USB.assets/image-20200903141549413.png)

**描述符结构**

![image-20200903141618404](USB.assets/image-20200903141618404.png)

![image-20200903141636582](USB.assets/image-20200903141636582.png)

![image-20200903141701254](USB.assets/image-20200903141701254.png)



#### 枚举

![image-20200903142031630](USB.assets/image-20200903142031630.png)



#### 遥测卡

![image-20200903142200229](USB.assets/image-20200903142200229.png)

**初始化和探测过程**

![image-20200903142241942](USB.assets/image-20200903142241942.png)

![image-20200903142306900](USB.assets/image-20200903142306900.png)

![image-20200903142325478](USB.assets/image-20200903142325478.png)

![image-20200903142345523](USB.assets/image-20200903142345523.png)

![image-20200903142401478](USB.assets/image-20200903142401478.png)

![image-20200903142453401](USB.assets/image-20200903142453401.png)

![image-20200903142528313](USB.assets/image-20200903142528313.png)

**寄存器访问**

![image-20200903142608667](USB.assets/image-20200903142608667.png)

![image-20200903142628412](USB.assets/image-20200903142628412.png)

![image-20200903142645790](USB.assets/image-20200903142645790.png)

![image-20200903142703217](USB.assets/image-20200903142703217.png)

![image-20200903142727784](USB.assets/image-20200903142727784.png)

![image-20200903142806428](USB.assets/image-20200903142806428.png)

**数据传输**

![image-20200903142828536](USB.assets/image-20200903142828536.png)

![image-20200903142842946](USB.assets/image-20200903142842946.png)

![image-20200903142907470](USB.assets/image-20200903142907470.png)

![image-20200903142935132](USB.assets/image-20200903142935132.png)

![image-20200903142954305](USB.assets/image-20200903142954305.png)



#### 类驱动程序

![image-20200903143026419](USB.assets/image-20200903143026419.png)

**大容量存储设备**

![image-20200903143100915](USB.assets/image-20200903143100915.png)

![image-20200903143126287](USB.assets/image-20200903143126287.png)

![image-20200903143150541](USB.assets/image-20200903143150541.png)

![image-20200903143221102](USB.assets/image-20200903143221102.png)

![image-20200903143250804](USB.assets/image-20200903143250804.png)

![image-20200903143314996](USB.assets/image-20200903143314996.png)

![image-20200903143338158](USB.assets/image-20200903143338158.png)

![image-20200903143400372](USB.assets/image-20200903143400372.png)

![image-20200903143418119](USB.assets/image-20200903143418119.png)

**USB-串行端口转换器**

![image-20200903143458249](USB.assets/image-20200903143458249.png)

![image-20200903143518971](USB.assets/image-20200903143518971.png)

![image-20200903143534840](USB.assets/image-20200903143534840.png)

![image-20200903143552776](USB.assets/image-20200903143552776.png)

**人机接口设备**

![image-20200903143628062](USB.assets/image-20200903143628062.png)

**蓝牙**

![image-20200903143648529](USB.assets/image-20200903143648529.png)



#### gadget驱动程序

![image-20200903143726654](USB.assets/image-20200903143726654.png)

![image-20200903143742759](USB.assets/image-20200903143742759.png)



#### 调试

![image-20200903143809511](USB.assets/image-20200903143809511.png)

![image-20200903143829278](USB.assets/image-20200903143829278.png)



#### 查看源代码

![image-20200903143854646](USB.assets/image-20200903143854646.png)

![image-20200903143914607](USB.assets/image-20200903143914607.png)

![image-20200903143935060](USB.assets/image-20200903143935060.png)





























