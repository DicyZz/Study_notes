## 进程地址空间

#### 地址空间

![image-20200905085505194](进程地址空间.assets/image-20200905085505194.png)

![image-20200905085540307](进程地址空间.assets/image-20200905085540307.png)



#### 内存描述符

![image-20200905090057976](进程地址空间.assets/image-20200905090057976.png)

![image-20200905090126745](进程地址空间.assets/image-20200905090126745.png)

**分配内存描述符**

![image-20200905090658120](进程地址空间.assets/image-20200905090658120.png)

![image-20200905090722566](进程地址空间.assets/image-20200905090722566.png)

**撤销内存描述符**

![image-20200905091018053](进程地址空间.assets/image-20200905091018053.png)

**mm_struct与内核线程**

![image-20200905091205681](进程地址空间.assets/image-20200905091205681.png)



#### 虚拟内存区域

![image-20200905091722980](进程地址空间.assets/image-20200905091722980.png)

**VMA标志**

![image-20200905092146146](进程地址空间.assets/image-20200905092146146.png)

![image-20200905092247917](进程地址空间.assets/image-20200905092247917.png)

![image-20200905092356262](进程地址空间.assets/image-20200905092356262.png)

**VMA操作**

![image-20200905092433133](进程地址空间.assets/image-20200905092433133.png)

**内存区域的树型结构和内存区域的链表结构**

![image-20200905092528105](进程地址空间.assets/image-20200905092528105.png)

**实际使用中的内存区域**

![image-20200905092858135](进程地址空间.assets/image-20200905092858135.png)

![image-20200905093014885](进程地址空间.assets/image-20200905093014885.png)



#### 操作内存区域

![image-20200905093845088](进程地址空间.assets/image-20200905093845088.png)

![image-20200905093940169](进程地址空间.assets/image-20200905093940169.png)

**find_vma()**

![image-20200905094021868](进程地址空间.assets/image-20200905094021868.png)

![image-20200905094045104](进程地址空间.assets/image-20200905094045104.png)

**find_vma_prev()**

![image-20200905094124802](进程地址空间.assets/image-20200905094124802.png)

**find_vma_intersection()**

![image-20200905094158473](进程地址空间.assets/image-20200905094158473.png)

![image-20200905094219861](进程地址空间.assets/image-20200905094219861.png)



#### mmap()和do_mmap()：创建地址区间

![image-20200905094328414](进程地址空间.assets/image-20200905094328414.png)

![image-20200905094400539](进程地址空间.assets/image-20200905094400539.png)



#### mummap()和do_mummap()：删除地址区间

![image-20200905094459371](进程地址空间.assets/image-20200905094459371.png)

![image-20200905094518774](进程地址空间.assets/image-20200905094518774.png)



#### 页表

![image-20200905094552785](进程地址空间.assets/image-20200905094552785.png)

![image-20200905094616244](进程地址空间.assets/image-20200905094616244.png)















































